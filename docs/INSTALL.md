# Installation Guide

This repo is a collection of independent projects. Each folder has its own dependencies and entrypoints.

## Prerequisites

- Git
- Python 3.10+
- Pip
- Optional: virtualenv or venv
- For Word2Vec C code: a C compiler and make (gcc/clang + make)

## Clone

```bash
git clone https://github.com/MLRG-CEFET-RJ/nerdd.git
cd nerdd
```

## Project Setup

### Mineração de Texto (Streamlit app)

Dependencies live in `Mineração de Texto/Streamlit/requirements.txt`.

```bash
cd "Mineração de Texto/Streamlit"
pip install -r requirements.txt
streamlit run index.py
```

Notes:
- The Streamlit app expects models generated by notebooks in `Mineração de Texto/Notebooks`.
- Run the notebooks first if the app is missing `.h5` models.

### dd_ner_pipeline

Requires Python 3.11+.

Dependencies live in `dd_ner_pipeline/requirements.txt`.

```bash
cd dd_ner_pipeline
pip install -r requirements.txt
python3 train_nested_kfold.py --train-path ../data/dd_corpus_small_train.json
python3 gliner_train/evaluate_gliner.py --model-path best_overall_gliner_model --gt-jsonl gliner_teste_sanidade.json
```

Notes:
- `pywin32` is Windows-only. It is already marked with a platform guard in the requirements file.
- For local smoke tests (CPU, low RAM), prefer offline cached execution:

```bash
HF_HUB_OFFLINE=1 TRANSFORMERS_OFFLINE=1 python3 train_nested_kfold.py \
  --model-base urchade/gliner_small-v2.1 \
  --train-path ../data/dd_corpus_smoke_20.json \
  --batch-size 1 \
  --max-length 32 \
  --overlap 2 \
  --num-epochs 1 \
  --n-splits 2 \
  --n-inner-splits 2 \
  --search-mode grid \
  --lr-values 3e-5 \
  --weight-decay-values 0.01 \
  --thresholds 0.6 \
  --refit-val-size 0.5 \
  --output-dir ./artifacts/gliner_train/smoke/run_nested_tiny \
  --log-level INFO
```

- `nested_cv_results.json` now includes:
  - `seen_entity_test_f1`: F1 on test mentions whose `(label, surface)` appeared in fold training data.
  - `unseen_entity_test_f1`: F1 on test mentions whose `(label, surface)` did not appear in fold training data.

### LSTM NER

Dependencies live in `lstm_ner/requirements*.txt`.

CPU install:

```bash
cd lstm_ner
pip install -r requirements-cpu.txt
```

GPU install:

```bash
cd lstm_ner
pip install -r requirements-gpu.txt
```

Then run:

```bash
python main.py
```

### Word2Vec - Leonidia

This is the original C implementation of word2vec.

```bash
cd "word2vec - Leonidia"
make
```

You can run the demo scripts in the same folder, for example:

```bash
bash demo-word.sh
```

## Troubleshooting

- If `pip install` fails, confirm you are in the correct subfolder and using the right requirements file.
- If you are on Windows, consider using PowerShell or Git Bash for the commands above.
